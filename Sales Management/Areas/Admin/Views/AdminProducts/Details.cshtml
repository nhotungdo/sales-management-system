@model Sales_Management.Models.Product

@{
    ViewData["Title"] = "Product Details";
}

<div class="container-fluid px-4">
    <h1 class="mt-4">Product Details</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="AdminProducts" asp-action="Index">Products</a></li>
        <li class="breadcrumb-item active">Details</li>
    </ol>

    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-info-circle me-1"></i>
            @Model.Name
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 text-center">
                    @if (Model.ProductImages != null && Model.ProductImages.Any())
                    {
                        var primary = Model.ProductImages.FirstOrDefault(p => p.IsPrimary == true) ?? Model.ProductImages.First();
                        <img src="@primary.ImageUrl" alt="@Model.Name" class="img-fluid rounded shadow-sm mb-3" style="max-height: 300px;" />
                        <div class="d-flex justify-content-center gap-2">
                             @foreach(var img in Model.ProductImages)
                             {
                                 <img src="@img.ImageUrl" style="width: 50px; height: 50px; object-fit: cover;" class="border rounded" />
                             }
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-secondary">No Image Available</div>
                    }
                </div>
                <div class="col-md-8">
                    <dl class="row">
                        <dt class="col-sm-3">Code</dt>
                        <dd class="col-sm-9">@Model.Code</dd>

                        <dt class="col-sm-3">Name</dt>
                        <dd class="col-sm-9 fw-bold">@Model.Name</dd>

                        <dt class="col-sm-3">Category</dt>
                        <dd class="col-sm-9"><span class="badge bg-info text-dark">@Model.Category?.Name</span></dd>

                        <dt class="col-sm-3">Selling Price</dt>
                        <dd class="col-sm-9 text-success fw-bold">@((Model.CoinPrice ?? 0).ToString("N0", new System.Globalization.CultureInfo("vi-VN"))) xu</dd>

                        <dt class="col-sm-3">Coin Price</dt>
                        <dd class="col-sm-9 text-warning">@(Model.CoinPrice?.ToString("N0") ?? "0") Coins</dd>

                        <dt class="col-sm-3">Import Price</dt>
                        <dd class="col-sm-9">@((Model.ImportPrice ?? 0).ToString("N0")) VNƒê</dd>

                        <dt class="col-sm-3">Stock Quantity</dt>
                         <dd class="col-sm-9">
                            @if(Model.StockQuantity < 10) {
                                <span class="text-danger fw-bold">@Model.StockQuantity (Low Stock)</span>
                            } else {
                                <span class="text-success">@Model.StockQuantity</span>
                            }
                        </dd>

                        <dt class="col-sm-3">Status</dt>
                        <dd class="col-sm-9">@Model.Status</dd>

                        <dt class="col-sm-3">Description</dt>
                        <dd class="col-sm-9">@Model.Description</dd>

                        <dt class="col-sm-3">Created By</dt>
                        <dd class="col-sm-9">@(Model.CreatedByNavigation?.FullName ?? "Unknown")</dd>

                        <dt class="col-sm-3">Created Date</dt>
                        <dd class="col-sm-9">@Model.CreatedDate</dd>

                         <dt class="col-sm-3">Last Updated</dt>
                        <dd class="col-sm-9">@Model.UpdatedDate</dd>
                    </dl>
                </div>
            </div>
            
            <div class="mt-4">
                <a asp-action="Edit" asp-route-id="@Model.ProductId" class="btn btn-warning">Edit</a>
                <a asp-action="Index" class="btn btn-secondary">Back to List</a>
            </div>
        </div>
    </div>
</div>
